\documentclass{newsiambook}
%\newcommand{\ProgrammingLanguage}{matlab}
\newcommand{\ProgrammingLanguage}{python}

\usepackage{hyperref}
\usepackage{amsmath, amsfonts, amscd, epsfig, amssymb, graphicx, url, mathrsfs}
\usepackage{makeidx}
\usepackage{multicol}
\usepackage{color}
\usepackage{crop}
%\usepackage{appendix}
\usepackage{verbatim}
\usepackage{listings}
\usepackage{pseudocode}
%\usepackage{caption}
%\usepackage{fontspec}
%\usepackage[T1]{fontenc}
%\usepackage{beramono}
%\usepackage{caption}
%\DeclareCaptionFont{white}{\color{white}}
%\DeclareCaptionFormat{listing}{\colorbox[cmyk]{0.43, 0.35, 0.35,0.01}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
%\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}}

%\usepackage{sagetex}
\usepackage{versions}
\usepackage{ifthen}
\include{include}
\crop
\makeindex
\newcommand{\objective}[1]{\vspace{5mm}{\bf Lesson Objective: } \emph{#1} \setcounter{problem}{0} \setcounter{equation}{0} \vspace{5mm}}
\renewcommand{\chaptername}{Lab}

\newcommand{\lab}[3]{\chapter[#3]{#1: #2}}
\providecommand{\abs}[1]{\lvert#1\rvert}
\providecommand{\norm}[1]{\lVert#1\rVert}
%\newcommand{\PythonVersion}{1}

% \captionsetup{style=base,
%               labelformat=default,
%               labelsep=endash,
%               justification=raggedright}

%\includeonly{./Applications_Combined/PageRank}
%\includeonly{./Algorithms_PyLabs/Functions_py}
\begin{document}

%-------------------------------------------------------------
%This section is logic that switches from one language to another. Maybe it should be in another file...
\ifthenelse{\equal{\ProgrammingLanguage}{python}}
{
  \includeversion{python}
  \excludeversion{matlab}
  \newcommand{\li}[1]{\lstinline[style=python]!#1!}
  %\renewcommand{\lstincludelisting}[2]{\lstincludelisting[style=python]{#2}}
  \renewcommand{\ProgrammingLanguage}{Python }

  %table of commands
  %\newcommand{\inverse}{la.inv()}
}{}

\ifthenelse{\equal{\ProgrammingLanguage}{matlab}}
{
  \includeversion{matlab}
  \excludeversion{python}
  \newcommand{\li}[1]{\lstinline[style=matlab]!#1!}
  %\renewcommand{\lstincludelisting}[2]{\lstincludelisting[style=matlab]{#2}}
  \renewcommand{\ProgrammingLanguage}{MATLAB }

  %table of commands
  %\newcommand{\inverse}{inv}
}{}

\lstset{basicstyle=\footnotesize,
        keywordstyle=\color{blue}\bfseries,
        tabsize=4,
        frame=tb,
        captionpos=b,
        title=\lstname,
        abovecaptionskip=-5pt,
        belowcaptionskip=-5pt,
        breaklines=true,
        breakatwhitespace=false,
        showstringspaces=false}

\lstdefinestyle{fromfile}{frame=single
                          numbers=left,
                          numberstyle=\tiny,
                          stepnumber=2,
                          numbersep=7pt,
                          numberfirstline=true,
                          abovecaptionskip=10pt,
                          belowcaptionskip=10pt}
                          
\lstdefinestyle{python}{language=Python}

\lstdefinestyle{matlab}{language=Matlab}

\newenvironment{pseudo}[2]
    {\begin{pseudocode}[shadowbox]{#1}{#2}}
    {\end{pseudocode}}

%----------------------------------------------------------------
%Book cover and Front matter
\thispagestyle{empty}
\begin{center}
{\Huge \bf Applied Mathematics and Computing}

\vspace{10mm}
{\Large \bf \ProgrammingLanguage Edition}

\vspace{20mm}

\includegraphics[scale = .25]{Cover}
\end{center}
\frontmatter
\begin{contributors}
\contributor{J. Humpherys}{Brigham Young University}
\contributor{J. Webb}{Brigham Young University}
\contributor{R. Murray}{Brigham Young University}
\contributor{J. West}{University of Michigan}
\end{contributors}
\setcounter{tocdepth}{1}
\tableofcontents

%------------------------------------------------------------------
%The preface, which will presumably be longer in the future
\begin{thepreface}
This lab manual is designed to accompany the book \emph{Foundations of Applied Mathematics}....
\end{thepreface}


%-----------------------------------------------------------------
\mainmatter

%-----------------------------------------------------------------
%Programming Tutorials are in the following sections. They are split into different files dependent upon language

\begin{python}
%Python programming tutorials
\include{./Ch0_Py/Py0}

\include{./Algorithms_PyLabs/Matrices1_py}
\include{./Algorithms_PyLabs/Matrices2_py}

\include{./Algorithms_PyLabs/Functions_py}
\end{python}

\begin{matlab}
%Matlab programming tutorials
\include{./Ch0_MAT/Ch0V2}

\include{./Algorithms_MATLabs/Matrices1}
\include{./Algorithms_MATLabs/Matrices2}

\include{./Algorithms_MATLabs/Functions}
\end{matlab}

%----------------------------------------------------------
%The Elementary Matrices lab is combined into one file

\include{./Algorithms_Combined/ElemMatr_C}

%-----------------------------------------------------------
%The next few labs are more programming tutorial labs, and are split by language
\begin{python}
\include{./Algorithms_PyLabs/Conditionals_py}
\include{./Algorithms_PyLabs/Complexity_py}
\end{python}

\begin{matlab}
\include{./Algorithms_MATLabs/Conditionals}
\include{./Algorithms_MATLabs/Complexity}
\end{matlab}

%-----------------------------------------------------------
%These labs are primarily Linear Algebra Labs (Factorizations and Applications)
%They are combined

\include{./Algorithms_Combined/QR_C}
\include{./Applications_Combined/Stats1_C}

\include{./Algorithms_Combined/Eig_C}
\include{./Applications_Combined/EigGraph_C}

\include{./Algorithms_Combined/Cholesky_C}
\include{./Applications_Combined/SVD_C}

%------------------------------------------------------------
%These labs are more advanced programming labs. They are separated by language.

\begin{python}

\include{./Algorithms_PyLabs/Functions2_wrg}
\include{./Applications_PyLabs/Vectorization_py}

\include{./Applications_PyLabs/Recursion_wrg}
%We need a profiler lab here.

\end{python}

\begin{matlab}
\include{./Algorithms_MATLabs/Functions2}
\include{./Applications_MATLabs/Vectorization}

\include{./Applications_MATLabs/Recursion}
\include{./Algorithms_MATLabs/Profiler}
\end{matlab}

%-----------------------------------------------------------
%These labs cover the basics of differentiation, Newton's method and a number of related applications. These are combined labs

\include{./Algorithms_Combined/FiniteDiff_C}
\include{./Applications_Combined/Beams_C}

\include{./Algorithms_Combined/FiniteDiff2_C}
\include{./Applications_Combined/Filters_C}

\include{./Applications_Combined/Newton_C}
\include{./Applications_Combined/LevelSet}%Needs to be written

\include{./Algorithms_Combined/Broyden}%Needs to be translated (RDG)
\include{./Applications_Combined/Julia}%Needs to be translated (RDG)

\include{./Applications_Combined/OrthoPoly_C}
\include{./Applications_Combined/MarkovGraph_C}

\include{./Applications_Combined/Leontief_C}
\include{./Applications_Combined/PageRank}% Needs to be translated
%Need permission and web address for internet.dat

%==================================================
%End of the first half
%==================================================


%---------------------------------------------------------------
%These labs cover integration and approximation theory. They are combined labs


%These labs still need to be merged/translated

\include{./Algorithms_Combined/Barycentric}%Needs to be translated (RDG)
\include{./Applications_Combined/MC}% (FWG)

\include{./Algorithms_Combined/NCInteg}%Needs to be translated
\include{./Applications_Combined/VEGAS}%Needs to be written

\include{./Algorithms_Combined/Splines}%Needs to be written
\include{./Applications_Combined/Tess}%Needs to be written

\include{./Algorithms_Combined/GaussQuad}%Needs to be written
\include{./Applications_Combined/NURBS_C}%Needs to be written

%---------------------------------------------------------------
%This is one lab about more advanced visualization topics. It will be split by language

\begin{matlab}
\include{./Algorithms_MATLabs/SciViz}%Not yet written
\end{matlab}

\begin{python}
\include{./Algorithms_PyLabs/SciViz}%Needs to be translated after its written
\end{python}

%---------------------------------------------------------------
%A few labs related to complex mappings and the perspective transform. These labs are combined.

%These labs need translation and merging

\include{./Applications_Combined/ConfMaps}% (FWG) --There wasn't any code to translate?

\include{./Algorithms_Combined/PerspTrans_C}%Needs to be written
\include{./Applications_Combined/RiemannSphere_C}%Partially written

%---------------------------------------------------------------
%These labs cover plotting and visualization. They will be separated by language

\begin{matlab}
\include{./Algorithms_MATLabs/GraphicsHandles}%Needs to be written
\include{./Applications_MATLabs/TimeDelay}%Needs to be written

\include{./Algorithms_MATLabs/Motion3D}%Needs to be written
\end{matlab}

\begin{python} 
\include{./Algorithms_PyLabs/GraphicsHandles}%Stub. Will need to be updated once written.
\include{./Applications_PyLabs/TimeDelay}%Stub. Will need to be updated once written.

\include{./Algorithms_PyLabs/Motion3D}%Stub. Will need to be updated once written.
\end{python}

%----------------------------------------------------------------
%These labs cover a wide variety of applications, and finish off the book. They will be combined

\include{./Applications_Combined/RayTracing}%To be written

\include{./Algorithms_Combined/Jordan}%To be written
\include{./Applications_Combined/LagSylvInterp}%To be written

\include{./Algorithms_Combined/Krylov}%To be written
\include{./Applications_Combined/MarkovPerron}%To be written

\include{./Algorithms_Combined/MP}%Needs to be translated (FWG) --Python Lacks an eigs command, which makes translation of the middle subsection difficult
\include{./Applications_Combined/MPApp}% (FWG)

\include{./Algorithms_Combined/Drazin}% (FWG)
\include{./Applications_Combined/MarkovCount}%To be written

%There will be four group theory labs here as well, but we don't have stubs for those yet.





%\appendix
%\appendixpage
%\addappheadtotoc
%\include{simulink}
\end{document}